#First we import a socket library which has all the functionality which is required for us to make a simple server
import socket


#HOST is a variable which holds a IP address.
HOST = '127.0.0.1'
#HOST varibale specifies from which host we need to listen from, so  here it will be localhost meaning any other incoming requests from other computer on same network will not be listened
# to make the server listen to the request from other computers on the network make the HOST variable empty; HOST=''

# PORT is a vaiable which holds a PORT number
PORT = 8080

# ServerSocket is a variable which holds socket.socket() function which creates a socket Object. we Then pass two arguments to the function 
# first arguments states the address family which is AF_INET in this case, AF_INET is the address family for IPv4
# second argument states the socket type, here SOCK_STREAM is TCP.
serverSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)


# now with the help of the serverSocket variable which holds the socket object we make our server to listen to a specific IP and PORT
# as I stated previously you can also listen from any IP in the network.
serverSocket.bind((HOST,PORT))

# finally we are making our server to listen for the incoming connections, now our server is in listen mode and ready to accept the incoming crequests
serverSocket.listen(1)


# if the connection is alive we awant to listen continuosly for the incoming requests if not our server will die after listening to one request
while True:
    
    #we are now estaablishing connection with the client
    #soon after we accept the connection, the accept() function will return a connection and address of the client
    # connection is further used to communicate with the client and the adress contain IP and PORT of the client
    connection, address = serverSocket.accept()
    #then just try to display the client's address to know where the connection is comming from
    print("client address =", address)
    #Now we will notify the client that they have successfully connected to our server
    #the connection object contains a functions send() which is used to send message.
    connection.send("Welcome to my server")
    #finally we will end the connection with the client
    connection.close()