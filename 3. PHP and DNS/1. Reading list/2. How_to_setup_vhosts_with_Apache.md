# __How to setup vhosts with Apache__


##### __*Only basic and required information about each topic is explained, please follow the link in __```Further Reading``` section__ to dig deeper*__

<br>

Even though this is in Reading List section, we are going to try and implement it on our own web server that we having been working with so far.

We will be working on all the three types of Virtual Hosting.

>### Name-based

<br>

#### Remember? In Name-based VHosting there will be two website on single server.

<br />

So, we are going to create and access these 2 domains in our sever.

```
http://website1.com
http://website2.com
```

Previously we modified our host file to access our IP address under the name ```vulnerable```. Now, same way map ```website1``` to the IP address .

(Make sure you use your IP address ,Please don't confuse my IP address with yours)

- Change the content of the /var/www/html/index.html file to [index.html](./index.html)

Now that we have one domain which is ```http://website1.com```, we will create next one(```http://website2```).

- First, Let's create a root directory for our next website.

```
sudo mkdir /var/www/website2 
```

- Create index.html file inside /var/www/website2 and paste [index.html](./index.html). (inside the index file change the contents from ```website1``` to ```website2```)

- Modify host file to access the IP address under the name ```website2```.

So, after you make the changes it will be something like this.

```
192.168.149.132 localhost
192.168.149.132 vulnerable
192.168.149.132 website1.com
192.168.149.132 website2.com
```

### So, we have root directory and domain name, We need to create a configuration file(```website2.conf```) to point the contents at root directory to the domain name.

- Create a folder (website2.conf) inside /etc/apache2/sites-available.

```
sudo mkdir /etc/apache2/sites-available/website2.conf 
```

- Paste these inside the configuration file

```
<VirtualHost 192.168.149.132:80>
    ServerName website2.com
    DocumentRoot /var/www/website2
</VirtualHost>
```

- Enable the website that we added:

```
sudo a2ensite website2.conf
```

- Restart server
```
sudo service apache2 reload
```

Now visit,

```
http://website1.com

output:
Welcome to Website1
```
```
http://website2.com

output:
Welcome to Website2
```

<br>

>### IP-based

<br>

[IP based](./Ip_based.md)

<br>


>### Port-based

<br>

[Port based](./Port_based.md)


> How does the server differentiate between the two website?

If you have read about host-header, you may not have this confusion. If not check it out [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host)